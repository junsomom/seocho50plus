<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>그림 동화책 창작 지침서 - 감정과 관계</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Add a custom font for better readability if needed */
    @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap');
    body {
      font-family: 'Nanum Gothic', 'Arial', sans-serif;
    }
  </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react-image-crop": "https://aistudiocdn.com/react-image-crop@^11.0.10",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.19.0"
  }
}
</script>
</head>
<body class="bg-orange-50 text-stone-800">
  <div class="container mx-auto max-w-4xl p-4 sm:p-8">
    <header class="text-center mb-10">
      <h1 class="text-4xl sm:text-5xl font-bold text-orange-800">🌳 감정과 관계를 위한 그림 동화책 창작 지침서</h1>
    </header>

    <div class="guide-box bg-white/80 border-l-4 border-orange-600 p-6 rounded-lg shadow-md mb-12">
      <p class="text-lg"><strong>이 그림책의 목표는</strong> ‘<strong>관계의 소중한 감정</strong>’을 가지고 자연과 이웃들과 관계하며 살아가는 인생의 중요성을 <strong>쉽게 이해하고 공감할 수 있도록</strong> 하는 것입니다. 이 목표를 마음에 두고 이야기를 창작해 주세요.</p>
    </div>

    <!-- Step 1 -->
    <div class="section bg-white p-8 rounded-xl shadow-lg mb-8">
      <h2 class="text-2xl font-bold text-orange-700 mb-2">Step 1. 주제를 먼저 정해보자!</h2>
      <p class="text-stone-600 mb-6 text-lg">"아낌없이 주는 나무"처럼 감정과 관계의 의미를 전하는 이야기를 자유롭게 생각해 보세요.</p>
      <div class="flex justify-between items-center mb-2">
        <label for="topic" class="block text-lg font-semibold text-stone-700">이야기의 주제</label>
        <button data-target="topic" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
      </div>
      <textarea id="topic" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="2" placeholder="나무와 아이의 따뜻한 우정 이야기"></textarea>
    </div>

    <!-- Step 2 -->
    <div class="section bg-white p-8 rounded-xl shadow-lg mb-8">
      <h2 class="text-2xl font-bold text-orange-700 mb-2">Step 2. 시놉시스를 만들어 보자!</h2>
      <p class="text-stone-600 mb-6 text-lg">이야기의 전체적인 뼈대를 구상해 보세요.</p>
      <div class="space-y-6">
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="title" class="block text-lg font-semibold text-stone-700">제목</label>
            <button data-target="title" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <input id="title" type="text" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" placeholder="언제나 기다려주는 나무" />
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="protagonist-synopsis" class="block text-lg font-semibold text-stone-700">주인공</label>
            <button data-target="protagonist-synopsis" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <input id="protagonist-synopsis" type="text" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" placeholder="마음이 따뜻한 나무 토토" />
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="problem" class="block text-lg font-semibold text-stone-700">문제 상황</label>
            <button data-target="problem" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="problem" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="3" placeholder="토토는 외로운 아이가 자라며 점점 멀어지는 것을 슬퍼해요."></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="solution" class="block text-lg font-semibold text-stone-700">해결 방법</label>
            <button data-target="solution" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="solution" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="3" placeholder="시간이 흘러 다시 돌아온 아이가 토토의 사랑을 깨달아요."></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="lesson" class="block text-lg font-semibold text-stone-700">교훈</label>
            <button data-target="lesson" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="lesson" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="2" placeholder="함께한 시간과 마음은 결코 사라지지 않아요."></textarea>
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="section bg-white p-8 rounded-xl shadow-lg mb-8">
      <h2 class="text-2xl font-bold text-orange-700 mb-2">Step 3. 등장인물 구성하기</h2>
      <p class="text-stone-600 mb-6 text-lg">이야기에 나올 인물들의 이름과 특징을 정해주세요.</p>
      <div class="space-y-6">
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="character-main" class="block text-lg font-semibold text-stone-700">주인공 이름과 특징</label>
            <button data-target="character-main" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="character-main" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="3" placeholder="조용하고 인내심 많은 나무 토토"></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="character-friend1" class="block text-lg font-semibold text-stone-700">친구1 이름과 특징</label>
            <button data-target="character-friend1" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="character-friend1" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="3" placeholder="외로움을 자주 느끼는 소년 민호"></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="character-friend2" class="block text-lg font-semibold text-stone-700">친구2 이름과 특징</label>
            <button data-target="character-friend2" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="character-friend2" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="3" placeholder="민호를 지켜보는 다람쥐 또또"></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="character-antagonist" class="block text-lg font-semibold text-stone-700">문제 유발자 (선택 사항)</label>
            <button data-target="character-antagonist" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="character-antagonist" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="3" placeholder="욕심 많은 어른들 또는 시간의 흐름"></textarea>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="section bg-white p-8 rounded-xl shadow-lg mb-8">
      <h2 class="text-2xl font-bold text-orange-700 mb-2">Step 4. 장면 구성 (5컷)</h2>
      <p class="text-stone-600 mb-6 text-lg">각 장면의 내용을 감정적으로 연결하여 이야기의 흐름을 만들어보세요.</p>
      <div class="space-y-6">
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="scene1" class="block text-lg font-semibold text-stone-700">장면 1</label>
            <button data-target="scene1" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="scene1" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="4" placeholder="아이 민호가 토토 나무와 처음 만나는 장면"></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="scene2" class="block text-lg font-semibold text-stone-700">장면 2</label>
            <button data-target="scene2" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="scene2" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="4" placeholder="민호는 토토에게 고민을 이야기하며 위로받아요."></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="scene3" class="block text-lg font-semibold text-stone-700">장면 3</label>
            <button data-target="scene3" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="scene3" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="4" placeholder="민호는 자라나며 점점 토토와 멀어져요."></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="scene4" class="block text-lg font-semibold text-stone-700">장면 4</label>
            <button data-target="scene4" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="scene4" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="4" placeholder="시간이 흐른 뒤 다시 돌아온 민호, 많이 늙은 토토를 발견해요."></textarea>
        </div>
        <div>
          <div class="flex justify-between items-center mb-2">
            <label for="scene5" class="block text-lg font-semibold text-stone-700">장면 5</label>
            <button data-target="scene5" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
          </div>
          <textarea id="scene5" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" rows="4" placeholder="민호가 토토에게 안기며 눈물을 흘리고, 변치 않는 우정을 확인해요."></textarea>
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="section bg-white p-8 rounded-xl shadow-lg mb-8">
      <h2 class="text-2xl font-bold text-orange-700 mb-2">Step 5. 이미지 스타일 선택하기</h2>
      <p class="text-stone-600 mb-6 text-lg">원하는 그림 스타일을 선택하여 동화책의 분위기를 정해주세요.</p>
        <div class="flex justify-between items-center mb-2">
            <label for="image-style" class="block text-lg font-semibold text-stone-700">그림 스타일</label>
            <button data-target="image-style" class="use-example-btn text-sm font-semibold text-orange-600 hover:text-orange-800 transition-colors">💡 예시 사용하기</button>
        </div>
      <select id="image-style" class="w-full p-4 bg-stone-50 border border-stone-300 rounded-lg text-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition">
        <option>연필 드로잉 스타일</option>
        <option selected>수채화 스타일</option>
        <option>디즈니 애니메이션 스타일</option>
        <option>동양화 스타일</option>
        <option>실사와 동화 혼합 스타일</option>
        <option>지브리 스튜디오 스타일</option>
        <option>픽사 애니메이션 스타일</option>
      </select>
    </div>

    <div class="text-center mt-12">
      <button id="generateBtn" class="w-full sm:w-auto bg-gradient-to-br from-orange-500 to-red-500 text-white text-xl font-bold py-4 px-12 rounded-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        AI 명령어 만들기
      </button>
    </div>
  </div>

  <script>
    // 'Use Example' button functionality
    document.addEventListener('DOMContentLoaded', () => {
      const exampleButtons = document.querySelectorAll('.use-example-btn');
      const inputFields = document.querySelectorAll('textarea[placeholder], input[placeholder], select');

      exampleButtons.forEach(button => {
        button.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = button.dataset.target;
          const targetInput = document.getElementById(targetId);
          
          if (targetInput) {
            // For select, we just use the currently selected value.
            // For others, we use the placeholder.
            if (targetInput.tagName.toLowerCase() !== 'select') {
                targetInput.value = targetInput.placeholder;
            }
            targetInput.classList.add('font-bold');
            
            // Trigger an input event to ensure any other listeners are aware of the change.
            targetInput.dispatchEvent(new Event('input', { bubbles: true }));
          }
        });
      });

      inputFields.forEach(input => {
        input.addEventListener('input', () => {
          if (input.value.trim() === '') {
            input.classList.remove('font-bold');
          } else {
             // If a user starts typing, we might want to keep it bold if an example was used,
             // or add bold if they are filling it in. For simplicity, we'll just ensure it's bold if not empty.
             input.classList.add('font-bold');
          }
        });
         // Also handle clearing the bold style if the user empties the input field
         input.addEventListener('keyup', () => {
            if(input.value.trim() === '') {
                input.classList.remove('font-bold');
            }
         });
      });
    });

    // AI prompt generation functionality
    document.getElementById('generateBtn').addEventListener('click', function () {
      const getValue = (id) => document.getElementById(id).value.trim() || '(내용 없음)';

      const values = {
        topic: getValue('topic'),
        title: getValue('title'),
        protagonistSynopsis: getValue('protagonist-synopsis'),
        problem: getValue('problem'),
        solution: getValue('solution'),
        lesson: getValue('lesson'),
        characterMain: getValue('character-main'),
        characterFriend1: getValue('character-friend1'),
        characterFriend2: getValue('character-friend2'),
        characterAntagonist: getValue('character-antagonist'),
        scene1: getValue('scene1'),
        scene2: getValue('scene2'),
        scene3: getValue('scene3'),
        scene4: getValue('scene4'),
        scene5: getValue('scene5'),
        imageStyle: getValue('image-style'),
      };

      const promptText = `
너는 어린이를 위한 그림 동화책을 쓰는 전문 작가이자 일러스트레이터 프롬프트 전문가야.
지금부터 내가 제공하는 정보에 맞춰서, 50대 이상 어르신들의 따뜻한 감성이 담긴 감동적이고 교훈적인 5장면짜리 그림 동화책을 만들어 줘.

**반드시 지켜야 할 규칙:**
1. 이야기는 매우 재미있고 창의적으로 전개해 줘.
2. 각 장면의 내용은 동화책 스타일로 흥미진진하게 서술해 줘.
3. 각 장면에 어울리는 이미지 프롬프트를 **한글과 영어로 모두** 상세하게 작성해 줘.
4. 표지 디자인에 어울리는 이미지 프롬프트도 한글과 영어로 작성해 줘.

---

### **1. 동화책 기본 정보**

*   **주제:** ${values.topic}
*   **제목:** ${values.title}
*   **교훈:** ${values.lesson}
*   **이미지 스타일:** ${values.imageStyle}

### **2. 시놉시스**

*   **주인공:** ${values.protagonistSynopsis}
*   **문제 상황:** ${values.problem}
*   **해결 방법:** ${values.solution}

### **3. 등장인물**

*   **주인공:** ${values.characterMain}
*   **친구 1:** ${values.characterFriend1}
*   **친구 2:** ${values.characterFriend2}
*   **문제 유발자 (선택):** ${values.characterAntagonist}

### **4. 이야기 장면 구성 (5컷)**

*   **장면 1:** ${values.scene1}
*   **장면 2:** ${values.scene2}
*   **장면 3:** ${values.scene3}
*   **장면 4:** ${values.scene4}
*   **장면 5:** ${values.scene5}

---

위 내용을 바탕으로 멋진 동화책을 만들어 줘.
      `.trim();

      const popupHtml = `
        <!DOCTYPE html>
        <html lang="ko">
        <head>
          <meta charset="UTF-8">
          <title>AI 동화책 명령어</title>
          <script src="https://cdn.tailwindcss.com"></script>
        </head>
        <body class="bg-gray-100 font-sans p-8">
          <div class="container mx-auto max-w-4xl bg-white p-8 rounded-lg shadow-lg">
            <h1 class="text-3xl font-bold mb-4 text-gray-800">생성된 AI 명령어</h1>
            <p class="text-gray-600 mb-6">아래 내용을 복사해서 Gemini와 같은 AI에 붙여넣으세요.</p>
            <button id="copyBtn" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg mb-6 hover:bg-blue-700 transition-colors">
              전체 내용 복사하기
            </button>
            <pre id="prompt-text" class="bg-gray-50 p-6 rounded-md whitespace-pre-wrap text-left text-gray-800 text-base leading-relaxed border border-gray-200">${promptText}</pre>
          </div>
          <script>
            document.getElementById('copyBtn').addEventListener('click', function() {
              const textToCopy = document.getElementById('prompt-text').innerText;
              navigator.clipboard.writeText(textToCopy).then(() => {
                const btn = document.getElementById('copyBtn');
                btn.innerText = '✅ 복사 완료!';
                btn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                btn.classList.add('bg-green-600');
                setTimeout(() => {
                  btn.innerText = '전체 내용 복사하기';
                  btn.classList.remove('bg-green-600');
                  btn.classList.add('bg-blue-600', 'hover:bg-blue-700');
                }, 2000);
              }).catch(err => {
                console.error('복사 실패: ', err);
                alert('자동 복사에 실패했습니다. 직접 복사해주세요.');
              });
            });
          <\/script>
        </body>
        </html>
      `;
      const newWindow = window.open('', '_blank');
      if (newWindow) {
        newWindow.document.write(popupHtml);
        newWindow.document.close();
      } else {
        alert('팝업이 차단되었습니다. 팝업 차단을 해제하고 다시 시도해주세요.');
      }
    });
  </script>
</body>
</html>
