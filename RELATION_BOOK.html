<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê·¸ë¦¼ ë™í™”ì±… ì°½ì‘ ì§€ì¹¨ì„œ - ê°ì •ê³¼ ê´€ê³„ (FIXED)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap');
    body { font-family: 'Nanum Gothic', 'Arial', sans-serif; }
    input, textarea, select, button { font-family: inherit; }
    .font-bold option:checked { font-weight: 700; }
  </style>
</head>
<body class="bg-orange-50 text-stone-800">
  <div class="container mx-auto max-w-4xl p-4 sm:p-8">
    <header class="text-center mb-10">
      <h1 class="text-4xl sm:text-5xl font-bold text-orange-800">ğŸŒ³ ê°ì •ê³¼ ê´€ê³„ë¥¼ ìœ„í•œ ê·¸ë¦¼ ë™í™”ì±… ì°½ì‘ ì§€ì¹¨ì„œ</h1>
    </header>

    <div class="guide-box bg-white/80 border-l-4 border-orange-600 p-6 rounded-lg shadow-md mb-12">
      <p class="text-lg"><strong>ì´ ê·¸ë¦¼ì±…ì˜ ëª©í‘œëŠ”</strong> â€˜<strong>ê´€ê³„ì˜ ì†Œì¤‘í•œ ê°ì •</strong>â€™ì„ ê°€ì§€ê³  ìì—°ê³¼ ì´ì›ƒë“¤ê³¼ ê´€ê³„í•˜ë©° ì‚´ì•„ê°€ëŠ” ì¸ìƒì˜ ì¤‘ìš”ì„±ì„ <strong>ì‰½ê²Œ ì´í•´í•˜ê³  ê³µê°í•  ìˆ˜ ìˆë„ë¡</strong> í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ëª©í‘œë¥¼ ë§ˆìŒì— ë‘ê³  ì´ì•¼ê¸°ë¥¼ ì°½ì‘í•´ ì£¼ì„¸ìš”.</p>
    </div>

    <!-- Steps 1 ~ 5 (unchanged structure) -->
    <!-- ... ê¸°ì¡´ ì…ë ¥ í¼ ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ ... -->

    <div class="text-center mt-12">
      <button id="generateBtn" type="button" class="w-full sm:w-auto bg-gradient-to-br from-orange-500 to-red-500 text-white text-xl font-bold py-4 px-12 rounded-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
        AI ëª…ë ¹ì–´ ë§Œë“¤ê¸°
      </button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // ì˜ˆì‹œ ë²„íŠ¼ ì²˜ë¦¬
      document.querySelectorAll('.use-example-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = btn.dataset.target;
          const targetInput = document.getElementById(targetId);
          if (!targetInput) return;
          if (targetInput.tagName.toLowerCase() === 'select') {
            targetInput.classList.add('font-bold');
          } else {
            targetInput.value = targetInput.placeholder || targetInput.value;
            targetInput.classList.add('font-bold');
          }
        });
      });

      // ì…ë ¥ ì‹œ bold ì²˜ë¦¬
      document.querySelectorAll('textarea, input, select').forEach(input => {
        input.addEventListener('input', () => {
          input.classList.toggle('font-bold', input.value.trim() !== '');
        });
      });

      // ë²„íŠ¼ í´ë¦­ ì‹œ íŒì—… ì—´ê¸°
      document.getElementById('generateBtn').addEventListener('click', () => {
        const getValue = (id) => {
          const el = document.getElementById(id);
          return el && el.value.trim() ? el.value.trim() : '(ë‚´ìš© ì—†ìŒ)';
        };

        const values = {
          topic: getValue('topic'),
          title: getValue('title-input'),
          protagonistSynopsis: getValue('protagonist-synopsis'),
          problem: getValue('problem'),
          solution: getValue('solution'),
          lesson: getValue('lesson'),
          characterMain: getValue('character-main'),
          characterFriend1: getValue('character-friend1'),
          characterFriend2: getValue('character-friend2'),
          characterAntagonist: getValue('character-antagonist'),
          scene1: getValue('scene1'),
          scene2: getValue('scene2'),
          scene3: getValue('scene3'),
          scene4: getValue('scene4'),
          scene5: getValue('scene5'),
          imageStyle: getValue('image-style'),
        };

        const promptText = `\n[ê·¸ë¦¼ ë™í™”ì±… ì°½ì‘ ì§€ì¹¨ì„œ - ê°ì •ê³¼ ê´€ê³„]\n\n---\n\n### Step 1. ì£¼ì œ\n${values.topic}\n\n### Step 2. ì‹œë†‰ì‹œìŠ¤\n- ì œëª©: ${values.title}\n- ì£¼ì¸ê³µ: ${values.protagonistSynopsis}\n- ë¬¸ì œ ìƒí™©: ${values.problem}\n- í•´ê²° ë°©ë²•: ${values.solution}\n- êµí›ˆ: ${values.lesson}\n\n### Step 3. ë“±ì¥ì¸ë¬¼\n- ì£¼ì¸ê³µ: ${values.characterMain}\n- ì¹œêµ¬1: ${values.characterFriend1}\n- ì¹œêµ¬2: ${values.characterFriend2}\n- ë¬¸ì œ ìœ ë°œì: ${values.characterAntagonist}\n\n### Step 4. ì¥ë©´ êµ¬ì„±\n1) ${values.scene1}\n2) ${values.scene2}\n3) ${values.scene3}\n4) ${values.scene4}\n5) ${values.scene5}\n\n### Step 5. ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼\n${values.imageStyle}\n\n---\n\nìœ„ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ë”°ëœ»í•˜ê³  ê°ë™ì ì¸ ê·¸ë¦¼ ë™í™”ì±…ì„ ë§Œë“¤ì–´ ì¤˜.`;

        const popupHtml = `<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><title>AI ë™í™”ì±… ëª…ë ¹ì–´</title><script src="https://cdn.tailwindcss.com"></script></head><body class="bg-gray-100 font-sans p-8"><div class="container mx-auto max-w-4xl bg-white p-8 rounded-lg shadow-lg"><h1 class="text-3xl font-bold mb-4 text-gray-800">ìƒì„±ëœ AI ëª…ë ¹ì–´</h1><p class="text-gray-600 mb-6">ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ Gemini ê°™ì€ AIì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</p><button id="copyBtn" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg mb-6 hover:bg-blue-700 transition-colors">ì „ì²´ ë‚´ìš© ë³µì‚¬í•˜ê¸°</button><pre id="prompt-text" class="bg-gray-50 p-6 rounded-md whitespace-pre-wrap text-left text-gray-800 text-base leading-relaxed border border-gray-200"></pre></div><script>const text=${JSON.stringify(promptText)};document.getElementById('prompt-text').textContent=text;document.getElementById('copyBtn').addEventListener('click',()=>{navigator.clipboard.writeText(text).then(()=>{const btn=document.getElementById('copyBtn');btn.textContent='âœ… ë³µì‚¬ ì™„ë£Œ!';btn.classList.remove('bg-blue-600','hover:bg-blue-700');btn.classList.add('bg-green-600');setTimeout(()=>{btn.textContent='ì „ì²´ ë‚´ìš© ë³µì‚¬í•˜ê¸°';btn.classList.remove('bg-green-600');btn.classList.add('bg-blue-600','hover:bg-blue-700');},2000);}).catch(()=>{alert('ìë™ ë³µì‚¬ ì‹¤íŒ¨. ì§ì ‘ ë³µì‚¬í•˜ì„¸ìš”.');});});<\/script></body></html>`;

        const newWindow = window.open('', 'aiPromptWindow', 'width=800,height=600');
        if (newWindow) {
          newWindow.document.open();
          newWindow.document.write(popupHtml);
          newWindow.document.close();
        } else {
          alert('íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € íŒì—… ì°¨ë‹¨ì„ í•´ì œí•˜ì„¸ìš”.');
        }
      });
    });
  </script>
</body>
</html>
